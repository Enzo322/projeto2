<div *ngIf="numero == 2">

  <div class="title" >
    <div>
      <h1 mat-dialog-title>Cadastrar Pedido</h1>
    </div>
    
    <button (click)="onNoClick()">
      <mat-icon>clear</mat-icon>
    </button>
  </div>
  <mat-tab-group>
    <mat-tab label="Cliente">

      <mat-form-field appearance="fill">
        <mat-label>Data Emissão</mat-label>
        <input matInput [matDatepicker]="picker" [(ngModel)]="startDate">
        <mat-hint>MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker startView="year" [startAt]="startDate"></mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Data Entrega</mat-label>
        <input matInput [matDatepicker]="picker2" [(ngModel)]="lastDate">
        <mat-hint>MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
        <mat-datepicker #picker2 startView="year" [startAt]="startDate"></mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Cliente</mat-label>
        <input matInput placeholder="Digite o nome do cliente" type="text" [(ngModel)]="nomeFantasia" maxlength="100"
          minlength="2">
      </mat-form-field>

      <table *ngIf="nomeFantasia.length">
        <tr>
          <th>Nome</th>
        </tr>
        <tr *ngFor="let cliente of clientes  | filter : nomeFantasia">
          <ng-template [ngIf]="cliente.cnpj !=0">
            <td (click)="addNomeFantasia(cliente.nomeFantasia, cliente.idCliente)">{{cliente.nomeFantasia}}</td>
          </ng-template>
        </tr>
      </table>

      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Endereço</mat-label>
        <input matInput placeholder="Digite a rua do Endereço" type="text" [(ngModel)]="logradouro" maxlength="100"
          minlength="2">
      </mat-form-field>

      <table *ngIf="nomeFantasia.length ">
        <tr>
          <th>rua</th>
          <th>Bairro</th>
          <th>Cidade</th>
          <th>Estado</th>
        </tr>
        <tr *ngFor="let enderecos of Endereco | filter : logradouro">
          <td (click)="addEndereco(enderecos.logradouro, enderecos.idEndereco)">{{enderecos.logradouro}}</td>
          <td (click)="addEndereco(enderecos.logradouro, enderecos.idEndereco)">{{enderecos.bairro}}</td>
          <td (click)="addEndereco(enderecos.logradouro, enderecos.idEndereco)">{{enderecos.localidade}}</td>
          <td (click)="addEndereco(enderecos.logradouro, enderecos.idEndereco)">{{enderecos.uf}}</td>
        </tr>
      </table>

      <br>

    </mat-tab>


    <mat-tab label="Pedido">
      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Produto</mat-label>
        <input matInput placeholder="Ex. jeans" [(ngModel)]="prod">
      </mat-form-field>

      <div *ngIf="prod.length">
        <div *ngFor="let produto of produtos | filter : prod">
            <h3 (click)="addProduto(produto.descricao, produto.idProduto, produto.preco)">{{produto.descricao}}</h3>
        </div>

        <div *ngFor="let produto of produtos2">
          <h3>Valor unitário : {{produto.preco}}</h3>

          <mat-form-field appearance="legacy">
            <mat-label>Quantidade</mat-label>
            <input matInput placeholder="digite a quantidade:" [(ngModel)]="qtd" (blur)="calculaTotal()">
          </mat-form-field>

          <mat-form-field appearance="legacy">
            <mat-label>Acrescimo (%)</mat-label>
            <input matInput placeholder="digite o acrescimo:" [(ngModel)]="acrescimo" (blur)="calculaTotal()">
          </mat-form-field>

          <mat-form-field appearance="legacy">
            <mat-label>Desconto (%)</mat-label>
            <input matInput placeholder="digite o desconto:" [(ngModel)]="desconto" (blur)="calculaTotal()">
          </mat-form-field>

          <mat-form-field appearance="legacy">
            <mat-label>Total</mat-label>
            <input matInput [(ngModel)]="total" readonly="true">
          </mat-form-field>

          <div mat-dialog-actions>
            <button mat-raised-button (click) = "adicionarArrayDePedidos()">Adicionar</button>
            <button mat-raised-button (click)="resetModels()">Apagar</button>
          </div>
      </div>
    </div>
      
    </mat-tab>
    <mat-tab label="Confirmar pedido">
      <table *ngIf="nomeFantasia.length">
        <tr>
          <th>Nome</th>
          <th>Data de Emissão</th>
          <th>Data de Entrega</th>
        </tr>
        <tr *ngFor="let cliente of clientes2">
            <td>{{cliente.nome}}</td>
            <td>{{cliente.dataEmissao | date: "dd/mm/yyyy"}}</td>
            <td>{{cliente.dataEntrega | date: "dd/mm/yyyy"}}</td>
        </tr>

        <tr>
          <th>rua</th>
          <th>Bairro</th>
          <th>Cidade</th>
          <th>Estado</th>
        </tr>
        <tr *ngFor="let enderecos of Endereco">
          <td>{{enderecos.logradouro}}</td>
          <td>{{enderecos.bairro}}</td>
          <td>{{enderecos.localidade}}</td>
          <td>{{enderecos.uf}}</td>
        </tr>

        <tr>
          <th>Produto</th>
          <th>Valor Unitário</th>
          <th>Quantidade</th>
          <th>Acrescimo</th>
          <th>Desconto</th>
          <th>Total do Produto</th>
          <th>Total</th>
        </tr>
        <tr *ngFor="let produto of produtos3">
          <td>{{produto.descricao}}</td>
          <td>{{produto.valorUnitario}}</td>
          <td>{{produto.quantidade}}</td>
          <td>{{produto.acrescimo}}%</td>
          <td>{{produto.desconto}}%</td>
          <td>{{produto.totalPedido}}</td>
          <td>{{produto.total}}</td>
        </tr>
      </table>

      <div mat-dialog-actions>
        <button mat-raised-button (click) = "post()">Confirmar</button>
      </div>

    </mat-tab>
  </mat-tab-group>
</div>
<div *ngIf="numero == 1">
  <div class="title">
    <div>
      <h1 mat-dialog-title>Editar</h1>
    </div>
    
    <button (click)="onNoClick()">
      <mat-icon>clear</mat-icon>
    </button>
  </div>
  <mat-tab-group>
    <mat-tab label="Pedido">
      <app-dropdown [array]="produtoPedidos" [idField]="'idProduto_pedido'" [textField]="'descricao'" 
      [title]="''" [(ngModel)]="selectedGroup"></app-dropdown> 

      <div *ngIf="selectedGroup > 0">
        <div *ngFor="let produtoPedido of produtoPedidos">
          <div *ngIf="selectedGroup == produtoPedido.idProduto_pedido">
            <h3 (click)="addPreco(produtoPedido.valorUnitario, produtoPedido.descricao)">{{produtoPedido.valorUnitario}}</h3>
          </div>
        </div>
      </div>
      <mat-form-field appearance="legacy">
        <mat-label>Quantidade</mat-label>
        <input matInput placeholder="digite a quantidade:" [(ngModel)]="qtd" (blur)="calculaTotal()">
      </mat-form-field>
    
      <mat-form-field appearance="legacy">
        <mat-label>Acrescimo (%)</mat-label>
        <input matInput placeholder="digite o acrescimo:" [(ngModel)]="acrescimo" (blur)="calculaTotal()">
      </mat-form-field>
    
      <mat-form-field appearance="legacy">
        <mat-label>Desconto (%)</mat-label>
        <input matInput placeholder="digite o desconto:" [(ngModel)]="desconto" (blur)="calculaTotal()">
      </mat-form-field>
    
      <mat-form-field appearance="legacy">
        <mat-label>Total</mat-label>
        <input matInput [(ngModel)]="total">
      </mat-form-field>
    
      <mat-form-field appearance="fill">
        <mat-label>Data Emissão</mat-label>
        <input matInput [matDatepicker]="picker" [(ngModel)]="startDate">
        <mat-hint>MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker startView="year" [startAt]="startDate"></mat-datepicker>
      </mat-form-field>
    
      <mat-form-field appearance="fill">
        <mat-label>Data Entrega</mat-label>
        <input matInput [matDatepicker]="picker2" [(ngModel)]="lastDate">
        <mat-hint>MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
        <mat-datepicker #picker2 startView="year" [startAt]="startDate"></mat-datepicker>
      </mat-form-field>
    
      <div mat-dialog-actions>
        <button mat-raised-button (click) = "put()">Confirmar</button>
      </div>
    </mat-tab>
    <mat-tab label="Deletar">
      <h1>Deseja mesmo deletar?</h1>

            <div mat-dialog-actions>
                <button mat-raised-button (click) = "delete()">Confirmar</button>
                <button mat-raised-button (click)="onNoClick()">Cancelar</button>
            </div>
    </mat-tab>
  </mat-tab-group>
  
</div>